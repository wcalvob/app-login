(this["webpackJsonpapp-login"]=this["webpackJsonpapp-login"]||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(20),s=n.n(c),o=(n(29),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))}),i=n(3),l=n.n(i),u=n(7),d=n(10),j=n(8),p=n(21),m=n(22),h=n(24),f=n(23),b=(n(31),n.p+"static/media/user.96156881.png"),g=n(4),O=n.n(g),v=n(0),x=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={form:{id:"",password:""},error:!1,errorMsg:""},e.submitHandler=function(e){e.preventDefault()},e.changeHandler=function(){var t=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({form:Object(d.a)(Object(d.a)({},e.state.form),{},Object(u.a)({},n.target.name,n.target.value))});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.buttonHandler=function(){O.a.post("http://camilo.touwolf.com:9101/api/v1/users/login",e.state.form).then((function(e){localStorage.setItem("token",e.data.token),window.location.reload(!0)})).catch((function(){e.setState({error:!0,errorMsg:"Verifique que los datos ingresados sean los correctos"})}))},e}return Object(m.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"app",children:Object(v.jsx)("header",{className:"login",children:Object(v.jsx)("div",{className:"wrapper fadeInDown",children:Object(v.jsxs)("div",{id:"formContent",children:[!0===this.state.error&&Object(v.jsx)("div",{className:"alert alert-danger",children:this.state.errorMsg}),Object(v.jsx)("div",{className:"fadeIn first",children:Object(v.jsx)("img",{src:b,className:"img-user",alt:"User"})}),Object(v.jsxs)("form",{method:"post",onSubmit:this.submitHandler,children:[Object(v.jsx)("input",{type:"text",id:"login",className:"fadeIn second",name:"id",placeholder:"Correo electr\xf3nico",onChange:this.changeHandler}),Object(v.jsx)("input",{type:"password",id:"password",className:"fadeIn third",name:"password",placeholder:"Contrase\xf1a",onChange:this.changeHandler}),Object(v.jsx)("input",{type:"submit",className:"fadeIn fourth",value:"Iniciar Sesi\xf3n",onClick:this.buttonHandler})]})]})})})})}}]),n}(r.a.Component),w=x,I=n(11),N=n.p+"static/media/construction.352a0805.png",k=localStorage.getItem("token");var C=function(){O.a.interceptors.request.use((function(e){return e.headers.authorization="Bearer "+k,e}),(function(e){return Promise.reject(e)}));var e=Object(a.useState)([]),t=Object(I.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),s=Object(I.a)(c,2),o=s[0],i=s[1],u=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("http://camilo.touwolf.com:9101/api/v1/users/profile");case 3:t=e.sent,r(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i("Error de conexi\xf3n con el API"),console.log(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return u(),Object(v.jsxs)("div",{className:"app",children:[Object(v.jsxs)("header",{className:"header",children:[Object(v.jsxs)("h4",{children:["Bienvenido(a), ",n.name," ",n.email]}),Object(v.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(){return localStorage.removeItem("token"),void window.location.reload(!0)},children:"Cerrar Sesi\xf3n"})]}),Object(v.jsx)("div",{className:"fadeIn first",children:Object(v.jsx)("img",{src:N,className:"img-construction",alt:"Construction"})})]})};var S=function(){return null==localStorage.getItem("token")?Object(v.jsx)(w,{}):Object(v.jsx)(C,{})};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(S,{})}),document.getElementById("root")),o()}},[[51,1,2]]]);
//# sourceMappingURL=main.7888adef.chunk.js.map